Timer unit: 1e-06 s

Total time: 0 s
File: /Users/gabrielecodega/Documents/amma/dev_tools/devtools_scicomp_project_2025/src/pyclassify/utils.py
Function: distance at line 7

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
     7                                           @profile
     8                                           def distance(point1: list[float], point2: list[float]) -> float:
     9                                               distance = 0
    10                                               for x1,x2 in zip(point1,point2):
    11                                                   distance += (x1-x2)*(x1-x2)
    12                                           
    13                                               return distance

Total time: 0 s
File: /Users/gabrielecodega/Documents/amma/dev_tools/devtools_scicomp_project_2025/src/pyclassify/utils.py
Function: distance_numpy at line 44

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
    44                                           @profile
    45                                           def distance_numpy(point1: np.ndarray, point2: np.ndarray) -> float:
    46                                               d = point1-point2
    47                                               return np.dot(d,d)

Total time: 0.08037 s
File: /Users/gabrielecodega/Documents/amma/dev_tools/devtools_scicomp_project_2025/src/pyclassify/utils.py
Function: majority_vote at line 15

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
    15                                           @profile
    16                                           def majority_vote(neighbors: list[int]) -> int:
    17      3681       3379.0      0.9      4.2      labels = range(max(neighbors)+1)
    18      3681      15708.0      4.3     19.5      counts = [ 0 for _ in labels ]
    19      3681       9850.0      2.7     12.3      votes = dict(zip(labels,counts)) 
    20                                           
    21     22086       5726.0      0.3      7.1      for label in neighbors:
    22     18405       7850.0      0.4      9.8          votes[label] += 1
    23                                           
    24      3681      37857.0     10.3     47.1      return max(votes, key=lambda key: votes[key])

Total time: 1.77009 s
File: /Users/gabrielecodega/Documents/amma/dev_tools/devtools_scicomp_project_2025/src/pyclassify/utils.py
Function: distance_numba at line 49

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
    49                                           @profile
    50                                           def distance_numba(point1: np.ndarray, point2: np.ndarray) -> float:
    51   3386520    1770086.0      0.5    100.0      return _distance_numba_compiled(point1, point2)

Total time: 9.71488 s
File: /Users/gabrielecodega/Documents/amma/dev_tools/devtools_scicomp_project_2025/src/pyclassify/classifier.py
Function: _get_k_nearest_neighbors at line 26

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
    26                                               @profile
    27                                               def _get_k_nearest_neighbors(self, X: Union[list[list[float]], np.ndarray], y: Union[list[int], np.ndarray], x: Union[list[float], np.ndarray]) -> list[int]:
    28      3681    8681394.0   2358.4     89.4          distances = list(map(partial(self.distance,x),X))
    29                                           
    30      3681    1011625.0    274.8     10.4          nn = sorted(range(len(distances)), key= lambda i: distances[i])
    31                                           
    32      3681       1365.0      0.4      0.0          labels = []
    33     22086       8646.0      0.4      0.1          for idx in nn[:self.n_neigh]:
    34     18405      10770.0      0.6      0.1              labels.append(y[idx])
    35      3681       1081.0      0.3      0.0          return labels

Total time: 9.92111 s
File: /Users/gabrielecodega/Documents/amma/dev_tools/devtools_scicomp_project_2025/src/pyclassify/classifier.py
Function: __call__ at line 37

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
    37                                               @profile
    38                                               def __call__(self, data: tuple[list[list[float]],list[int]], new_points: list[list[float]]):
    39         1          4.0      4.0      0.0          if self.backend == 'numpy' or self.backend == 'numba':
    40         1       2962.0   2962.0      0.0              data = (np.array(data[0]), np.array(data[1]))
    41         1      14999.0  14999.0      0.2              new_points = np.array(new_points)
    42         1    9796640.0    1e+07     98.7          nn_labels = list(map(partial(self._get_k_nearest_neighbors,*data), new_points))
    43         1     106503.0 106503.0      1.1          prediction = list(map(majority_vote,nn_labels))
    44         1          0.0      0.0      0.0          return prediction

  0.00 seconds - /Users/gabrielecodega/Documents/amma/dev_tools/devtools_scicomp_project_2025/src/pyclassify/utils.py:7 - distance
  0.00 seconds - /Users/gabrielecodega/Documents/amma/dev_tools/devtools_scicomp_project_2025/src/pyclassify/utils.py:44 - distance_numpy
  0.08 seconds - /Users/gabrielecodega/Documents/amma/dev_tools/devtools_scicomp_project_2025/src/pyclassify/utils.py:15 - majority_vote
  1.77 seconds - /Users/gabrielecodega/Documents/amma/dev_tools/devtools_scicomp_project_2025/src/pyclassify/utils.py:49 - distance_numba
  9.71 seconds - /Users/gabrielecodega/Documents/amma/dev_tools/devtools_scicomp_project_2025/src/pyclassify/classifier.py:26 - _get_k_nearest_neighbors
  9.92 seconds - /Users/gabrielecodega/Documents/amma/dev_tools/devtools_scicomp_project_2025/src/pyclassify/classifier.py:37 - __call__
